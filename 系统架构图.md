# HR管理系统架构图

## 图1：系统整体架构图

```mermaid
graph TB
    subgraph "前端层"
        A[React 18 + TypeScript]
        B[Ant Design Pro 6]
        C[UmiJS 4]
    end
    
    subgraph "后端层"
        D[Spring Boot 3.2.5]
        E[Spring Security 6]
        F[MyBatis 3.0.3]
    end
    
    subgraph "数据层"
        G[MySQL 8.0]
    end
    
    subgraph "工具层"
        H[JWT认证]
        I[PDF生成]
        J[Excel导出]
    end
    
    A --> D
    B --> D
    C --> D
    D --> E
    D --> F
    F --> G
    D --> H
    D --> I
    D --> J
```

## 架构说明

### 前端层
- **React 18 + TypeScript**：现代化的前端框架，提供类型安全
- **Ant Design Pro 6**：企业级UI组件库，提供丰富的界面组件
- **UmiJS 4**：前端应用框架，提供路由、状态管理等功能

### 后端层
- **Spring Boot 3.2.5**：Java后端框架，提供快速开发能力
- **Spring Security 6**：安全框架，提供认证和授权功能
- **MyBatis 3.0.3**：ORM框架，提供数据访问层功能

### 数据层
- **MySQL 8.0**：关系型数据库，存储系统数据

### 工具层
- **JWT认证**：无状态认证机制
- **PDF生成**：工资条PDF导出功能
- **Excel导出**：数据报表导出功能

## 图2：用户角色权限图

```mermaid
graph TB
    subgraph "系统管理员 ADMIN"
        A1[员工管理 - 全部权限]
        A2[工资管理 - 全部权限]
        A3[统计报表 - 全部权限]
        A4[系统管理 - 全部权限]
    end
    
    subgraph "人事专员 HR"
        B1[员工管理 - 查看/添加/修改]
        B2[工资管理 - 查看/录入/修改]
        B3[统计报表 - 查看]
    end
    
    subgraph "普通员工 EMPLOYEE"
        C1[个人信息 - 查看]
        C2[工资条 - 查看/导出]
    end
    
    A1 --> B1
    A2 --> B2
    A3 --> B3
    B1 --> C1
    B2 --> C2
```

## 权限说明

### 系统管理员（ADMIN）
- 拥有系统所有功能的完全访问权限
- 可以管理用户账号和角色
- 可以配置系统权限和设置
- 负责系统维护和升级

### 人事专员（HR）
- 可以管理员工信息和工资信息
- 可以查看统计报表
- 不能进行系统管理操作
- 不能删除员工和工资记录

### 普通员工（EMPLOYEE）
- 只能查看个人信息和工资条
- 可以导出PDF格式工资条
- 不能查看其他员工信息
- 不能进行任何管理操作

## 图3：数据库E-R图

```mermaid
erDiagram
    USERS {
        bigint id PK
        varchar username UK
        varchar password
        varchar real_name
        varchar status
        bigint employee_id FK
        datetime created_at
        datetime updated_at
    }
    
    ROLES {
        bigint id PK
        varchar role_name
        varchar role_code UK
        varchar description
        datetime created_at
        datetime updated_at
    }
    
    USER_ROLES {
        bigint id PK
        bigint user_id FK
        bigint role_id FK
        datetime created_at
    }
    
    EMPLOYEES {
        bigint id PK
        varchar employee_no UK
        varchar name
        varchar gender
        date birth_date
        varchar id_card
        varchar phone
        varchar email
        varchar address
        varchar education
        varchar marital_status
        varchar title
        varchar department
        varchar position
        date entry_date
        varchar status
        datetime created_at
        datetime updated_at
    }
    
    SALARY_ITEMS {
        bigint id PK
        varchar name UK
        varchar type
        decimal default_amount
        boolean enabled
        varchar description
        datetime created_at
        datetime updated_at
    }
    
    SALARY_RECORDS {
        bigint id PK
        bigint employee_id FK
        varchar year_month
        decimal base_salary
        decimal bonus
        decimal deduction
        decimal actual_salary
        varchar remark
        bigint created_by FK
        datetime created_at
        datetime updated_at
    }
    
    SALARY_DETAILS {
        bigint id PK
        bigint salary_record_id FK
        bigint item_id FK
        decimal amount
    }
    
    USERS ||--o| EMPLOYEES : "employee_id"
    USERS ||--o{ USER_ROLES : "user_id"
    ROLES ||--o{ USER_ROLES : "role_id"
    EMPLOYEES ||--o{ SALARY_RECORDS : "employee_id"
    SALARY_RECORDS ||--o{ SALARY_DETAILS : "salary_record_id"
    SALARY_ITEMS ||--o{ SALARY_DETAILS : "item_id"
    USERS ||--o{ SALARY_RECORDS : "created_by"
```

## 图4：系统功能模块图

```mermaid
graph TB
    subgraph "员工管理模块"
        A1[员工信息管理]
        A2[员工状态管理]
        A3[多条件查询]
        A4[Excel导出]
    end
    
    subgraph "工资管理模块"
        B1[工资项目管理]
        B2[工资记录管理]
        B3[工资条查看]
        B4[PDF导出]
    end
    
    subgraph "统计报表模块"
        C1[数据统计]
        C2[图表展示]
        C3[报表导出]
    end
    
    subgraph "系统管理模块"
        D1[用户管理]
        D2[权限管理]
        D3[系统设置]
    end
    
    subgraph "权限控制模块"
        E1[角色管理]
        E2[权限配置]
        E3[访问控制]
    end
    
    A1 --> B2
    B1 --> B2
    B2 --> B3
    B3 --> B4
    A1 --> C1
    C1 --> C2
    C2 --> C3
    D1 --> E1
    D2 --> E2
    E1 --> E3
    E2 --> E3
```

## 图5：系统实现架构图

```mermaid
graph TB
    subgraph "前端实现层"
        F1[React 18 + TypeScript]
        F2[Ant Design Pro 6]
        F3[UmiJS 4]
        F4[Axios HTTP客户端]
        F5[Access权限控制]
    end
    
    subgraph "后端实现层"
        B1[Spring Boot 3.2.5]
        B2[Spring Security 6]
        B3[Spring MVC]
        B4[MyBatis 3.0.3]
        B5[PageHelper分页]
    end
    
    subgraph "数据实现层"
        D1[MySQL 8.0]
        D2[连接池管理]
        D3[事务管理]
    end
    
    subgraph "工具实现层"
        T1[JWT认证]
        T2[PDFBox生成]
        T3[EasyExcel导出]
        T4[BCrypt加密]
    end
    
    F1 --> B1
    F2 --> B1
    F3 --> B1
    F4 --> B1
    F5 --> B2
    B1 --> B2
    B1 --> B3
    B1 --> B4
    B4 --> B5
    B4 --> D1
    D1 --> D2
    D1 --> D3
    B1 --> T1
    B1 --> T2
    B1 --> T3
    B2 --> T4
```

## 实现说明

### 前端实现层
- **React 18 + TypeScript**：现代化组件开发，类型安全
- **Ant Design Pro 6**：企业级UI组件，响应式设计
- **UmiJS 4**：应用框架，约定式路由
- **Axios HTTP客户端**：API请求封装，拦截器处理
- **Access权限控制**：页面级和按钮级权限

### 后端实现层
- **Spring Boot 3.2.5**：自动配置，内嵌服务器
- **Spring Security 6**：安全框架，JWT认证
- **Spring MVC**：RESTful API，参数验证
- **MyBatis 3.0.3**：ORM映射，动态SQL
- **PageHelper分页**：分页插件，性能优化

### 数据实现层
- **MySQL 8.0**：关系型数据库，事务支持
- **连接池管理**：数据库连接优化
- **事务管理**：数据一致性保障

### 工具实现层
- **JWT认证**：无状态认证，令牌管理
- **PDFBox生成**：PDF文档创建，中文处理
- **EasyExcel导出**：Excel文件生成，大数据处理
- **BCrypt加密**：密码安全存储
